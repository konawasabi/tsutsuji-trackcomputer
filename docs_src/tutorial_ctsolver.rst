==================
CurveTrack Solver
==================

はじめに
========

このセクションでは、Measureウィンドウの機能の一つである :ref:`CurveTrack Solver <ref_measure_ctsolver>` について、いくつかの使用シーンごとに使用手順を紹介します。


航空写真から曲線半径を求める
=========================

:doc:`背景画像 <tutorial_backimg>` として表示した航空写真や地図上に記された曲線軌道から曲線半径を割り出します。
基本的な使い方は次の通りです。

1. カーソルAのPos., Dir.を曲線軌道の始点に合わせる
2. カーソルBのPos., Dir.を曲線軌道の終点に合わせる
3. Mode を次のどちらかに設定してDo Itをクリックする

   1. α(fix)->β(free), R(free)
   2. α(free)->β(fix), R(free)

.. image:: ./files/tutorial/ctsolver_fitradius.png
	   :scale: 50%

これで、カーソルA, B間を結ぶ最適な曲線軌道の曲線半径・曲線長が計算されます。
計算結果はプロットウィンドウに図示され、同時に、計算に用いた各種パラメータと、Curve構文で表した計算結果がターミナルに表示されます。
以下、プロットウィンドウの表示例とターミナルへの出力例を示します。

.. image:: ./files/tutorial/ctsolver_mode1.png
	   :scale: 40%

.. code-block:: text

    [Curve fitting]
    Inputs:
    Fitmode:          1. α(fix)->β(free), R(free)
    Cursor α,β:       A,B
    Ponint α:         (45.009866, -8.697464)
    Ponint β:         (127.091985, -4.112291)
    Direction α:     6.968257
    Direction β:     -0.082262
    Transition func.: line
    TCL α:            0.000000
    TCL β:            0.000000
    Results:
    R:   -621.953334
    CCL: 76.534326
    endpt:            (121.357858, -4.104058)
    shift from pt. β: -5.734133

    $pt_a;
    Curve.SetFunction(1);
    Curve.Interpolate(0.000000,0.000000);
    $pt_a +0.000000;
    Curve.Interpolate(-621.953334,0.000000);
    $pt_a +76.534326;
    Curve.Interpolate(-621.953334,0.000000);
    $pt_a +76.534326;
    Curve.Interpolate(0.000000,0.000000);

.. note::

   曲線の始点・終点へカーソルを合わせることが難しい場合は、プロットウィンドウのY Mag.を変更するとある程度合わせやすくなります。
   上記の例では、Y Mag. = 7としています。

   これは、注目している軌道と直交する方向の表示倍率を大きくすることで、軌道の曲率を見かけ上大きくしていることに相当します。
   軌道の方向がx軸と平行でない場合はあまり効果を発揮しないのが悩みどころです。


Modeについて
------------



緩和曲線の扱い
--------------


曲線軌道の始点を求める
====================


1. カーソルAのPos., Dir.を曲線軌道の始点に合わせる
2. カーソルBのPos., Dir.を曲線軌道の終点に合わせる
3. Rフィールドに曲線半径を入力する
4. Modeを 3. α(free)->β(free), R(fix) に設定してDo Itをクリックする

他の軌道への合流
===============


渡り線
========


待避線
=======




